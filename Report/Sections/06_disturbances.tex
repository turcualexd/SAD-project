\subsection{Disturbances analysis}
\label{subsec:disturbances_analysis}
In order to make a realistic simulation of the rotating motion of the spacecraft, the environment 
distrubances has to be taken into account. The preliminary study of these external torques is 
crucial for a realistic simulation. In the following paragraphs a brief introduction will be 
done for all the main disturbances, then the simulation of the specific satellite and orbit
will be presented, mainly to choose the two most relevant disturbances. This choice is reasonable 
since there are always two predominant effects of disturbance, while the other can be supposed small 
(usually some order of magnitude smaller, but always depends on the specific case). 


\subsubsection{Magnetic Disturbance}
\label{subsubsec:dist_mag}



\subsubsection{SRP Disturbance}
\label{subsubsec:dist_SRP}
SRP radiation torque is the disturbance generated by electromagnetic waves that impacts on
the spacecraft panels and generate a force. These forces acting on some of the panels could give rise to 
a net torque around the center of mass of the spacecraft. Only sun radiation will be considered 
in this case, a more deep analysis should consider infrared Earth radiation and reflected Earth radiation. 
In addition, no eclipse condition will be analyzed during all the simulation, a reasonable assumption for the 
sun-synchronous case orbit.\\
The formula to calculate the force acting on each discrete panel is:
\begin{empheq}{gather*}
    \boldsymbol{F_i} = -PA_i \left( \hat{S}_B \cdot \hat{N}_{B,i}\ \right) \left[ \left(1 - \rho_s \right)\hat{S}_B + \left(2\rho_s\left( \hat{S}_B \cdot \hat{N}_{B,i}\ \right) + \frac{2}{3}\rho_d \right) \hat{N}_{B,i}\right] 
\end{empheq}
In order to simulate this kind of disturbance the coefficients of absorption, specular reflection and diffusion
has to be decided. These values clearly depends on the material that will be choosen to construct the main body
of the spacecraft, and the solar panels. Since these parameters are related through an energetic balance, we could 
only decide two of them and the third follows. In order to determine the force on each surface, also the geometry of
the panels of the satellite has to be given, in particular size of each 
panel(fully defined in section ...) and direction of the normal of the panel
in $\mathcal{B}$ frame. The direction of sun $\hat{S}_B$, has been firstly modeled in ECI frame considering the obliquity
$\epsilon$ of earth's rotation axis with respect to the ecliptic plane, then through attitude matrix, the unit vector $\hat{S}_B$
has been computed. Lastly, to caluclate the torque we should known where the resulting force on each panel acts (i.e. the centre of
SRP force for each panel). No detailed calulation has been made on this aspect, it is assumed as first approximation that the 
forces acts on the geometric center of the corresponding plate. Also, in order to correctly calculate the total
torque a shadow check must be performed, this is simply implementated in Simulink by checkin the sign
of the dot product of the normal versor of the plate and the sun direction.

\subsubsection{Drag Disturbance}
\label{subsubsec:dist_drag}

Over extended periods, the spacecraft's engagement with the higher strata of Earth's atmosphere results
in the generation of a torque around its mass center. This influence may not be trivial. At altitudes 
less than 400 kilometers, the aerodynamic torque is the predominant factor, though its significance diminishes 
considerably beyond 700 kilometers altitude.

\[
T_{AERO} =
\begin{cases}
	\sum_{i=1}^{n} \vec{r}_i \times \vec{F}_i, & \text{if } \vec{N}_{bi} \cdot \vec{v}^{b}_{rel} \geq 0 \\
	0, & \text{if } \vec{N}_{bi} \cdot \vec{v}^{b}_{rel} < 0
\end{cases}
\text{ with }
\]

\[
\vec{F}_i = -\frac{1}{2} \rho C_D v_{rel}^2 \vec{v}_{rel}^{b} (\vec{N}_{bi} \cdot \vec{v}_{rel}^{b}) A_i \quad \text{n=number of faces}
\]


\subsubsection{Gravity Gradient Disturbance}

The gravity around the spacecraft is not uniform, hence a non-negligible torque will arise from there. Studying the torque generated by an elementary force acting on the elementary mass \( dm \) the equation for this is obtained:

\begin{equation*}
	dM = -\mathbf{r} \times \frac{Gm_t dm}{|\mathbf{R} + \mathbf{r}|^3} (\mathbf{R} + \mathbf{r})
\end{equation*}

Where \( \mathbf{r} \) is the distance of \( dm \) from the centre of mass and \( \mathbf{R} \) is the distance of the centre of mass from the centre of the Earth. Approximating this equation, and expressing the position vector of the centre of mass as the product of magnitude (\( R \)) with the direction cosines, itâ€™s possible to centre this torque in the principal inertia axes. Integrating this equation the final form is achieved.

\begin{align*}
	M_x &= \frac{3Gm_t}{R^3} (I_z - I_y)c_2c_3 \\
	M_y &= \frac{3Gm_t}{R^3} (I_x - I_z)c_1c_3 \\
	M_z &= \frac{3Gm_t}{R^3} (I_y - I_x)c_1c_2
\end{align*}

The \( c_1, c_2 \) and \( c_3 \) are the direction cosines of the radial direction in the principal axes. Therefore if one of the principal axes is aligned with the radial direction the torque will be zero because only one of the direction cosines is non-zero.

\label{subsubsec:dist_GG}

\subsubsection{Simulation of all disturbances}
\label{subsubsec:sim_disturbances}

\cfig{disturbances.eps}{Simulation of all disturbances}{disturb_all}{1}